<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icertis Agents</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'SÃ¶hne', 'Segoe UI', Helvetica, Arial, sans-serif;
            background-color: #fff;
            height: 100vh;
            overflow: hidden;
        }

    /* Animated hero title */
.hero-title {
  font-size: 1.9rem;
  margin: 0;
  letter-spacing: 0.02em;
  font-weight: 700;

  /* Animated gradient */
  background: linear-gradient(
    135deg,
    Red,
    Blue,
    Green,
    Yellow,
    Cyan
  );
  background-size: 300% 300%;
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;

  animation: gradientFlow 3s ease infinite;
}

/* Animation keyframes */
@keyframes gradientFlow {
  0% {
    background-position: 0% 0%;
  }
  50% {
    background-position: 100% 100%;
  }
  100% {
    background-position: 0% 0%;
  }
}

        /* --- Sidebar Styling (Unchanged) --- */
        .sidebar {
            width: 260px;
            background-color: #f9f9f9;
            display: flex;
            flex-direction: column;
            height: 100%;
            border-right: 1px solid #e5e5e5;
            transition: all 0.3s ease;
        }

        .nav-btn {
            text-align: left;
            padding: 10px 12px;
            border-radius: 8px;
            color: #000;
            font-size: 14px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: background-color 0.2s;
            cursor: pointer;
        }
        .nav-btn:hover { background-color: #e3e3e3; }
        .section-label { font-size: 12px; font-weight: 600; color: #666; padding: 20px 12px 8px; }
        .chat-history-item { font-size: 14px; padding: 8px 12px; color: #333; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; border-radius: 8px; cursor: pointer; }
        .chat-history-item:hover { background-color: #e3e3e3; }
        .profile-section { margin-top: auto; padding: 12px; border-top: 1px solid #e5e5e5; }
        .user-profile { display: flex; align-items: center; padding: 8px; border-radius: 8px; cursor: pointer; }
        .user-profile:hover { background-color: #e3e3e3; }
        .avatar { width: 32px; height: 32px; background-color: #8e8ea0; color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; margin-right: 10px; }
        .upgrade-btn-sidebar { font-size: 12px; border: 1px solid #e5e5e5; background: white; border-radius: 6px; padding: 4px 8px; margin-left: auto; }
        .sidebar-scroll-area { flex: 1; overflow-y: auto; padding: 0 10px; }

        /* --- Main Content Styling --- */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
            background-color: white;
            padding-bottom: 90px;
        }

        .top-bar {
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 60px;
            border-bottom: 1px solid #f0f0f0;
        }

        .model-selector { font-weight: 600; font-size: 18px; color: #444; display: flex; align-items: center; gap: 5px; cursor: pointer; }
        .upgrade-pill { background-color: #f2f1ff; color: #5d5dff; font-weight: 500; font-size: 14px; padding: 6px 16px; border-radius: 20px; text-decoration: none; display: flex; align-items: center; gap: 8px; }

        /* --- Chat Log Area --- */
        .chat-log {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px 20px 0 20px;
            width: 100%;
        }

        /* Initial Greeting Style */
        .greeting {
            font-size: 42px;
            font-weight: 700;
            margin: 100px auto 40px auto;
            text-align: center;
            max-width: 768px;
        }

        /* --- Message Styles --- */
        .chat-message {
            display: flex;
            flex-direction: column;
            padding: 15px 0;
            margin: 0 auto;
            max-width: 768px;
            border-bottom: 1px solid #f0f0f0;
        }

        .chat-message:last-child {
            border-bottom: none;
            padding-bottom: 30px;
        }

        .message-row {
            display: flex;
            width: 100%;
            align-items: flex-start;
        }

        /* Message Text: KEY FIX HERE */
        .message-text {
            color: #000;
            font-size: 16px;
            line-height: 1.6;
            /* Preserve white space and line breaks, wrapping when necessary */
            white-space: pre-wrap;
        }

        /* User Message (Right aligned) */
        .user-message .message-row {
            justify-content: flex-end;
        }
        .user-message .message-text {
            padding: 0;
            max-width: 90%;
            text-align: right;
            /* Removed flex-grow: 1 so the bubble shrinks to content width */
        }
        .user-message .message-icon {
            margin-left: 20px;
            order: 2;
        }

        /* Assistant Message (Left aligned) */
        .assistant-message .message-text {
            padding-left: 20px;
            max-width: calc(100% - 60px);
        }
        .assistant-message .message-icon {
            flex-shrink: 0;
            margin-right: 20px;
            background-color: #000;
        }

        /* Message Icons (User/Assistant) */
        .message-icon {
            flex-shrink: 0;
            width: 36px;
            height: 36px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            font-weight: bold;
            color: white;
            text-transform: uppercase;
        }
        .user-message .message-icon {
            background-color: #8e8ea0;
        }
        .assistant-message .message-icon {
            font-size: 16px;
        }


        /* --- Reaction Icons (Moved to bottom row) --- */
        .reaction-icons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            margin-left: 56px;
            color: #999;
            font-size: 18px;
        }
        .reaction-icons i {
            cursor: pointer;
            padding: 5px;
            border-radius: 4px;
        }
        .reaction-icons i:hover {
            background-color: #f0f0f0;
            color: #000;
        }

        /* --- Input Area (Fixed to bottom) --- */
        .input-area-fixed {
            position: fixed;
            bottom: 0;
            left: 260px;
            right: 0;
            padding: 20px;
            background: linear-gradient(to top, white 50%, rgba(255, 255, 255, 0.5) 100%);
            z-index: 1000;
            display: flex;
            justify-content: center;
        }

        .input-container {
            width: 100%;
            max-width: 768px;
            padding: 0 20px;
            position: relative;
        }

        /* Input Box/Textarea Styles */
        .prompt-box {
            background-color: #f4f4f4;
            border-radius: 26px;
            padding: 14px 50px 14px 50px;
            min-height: 52px;
            position: relative;
            border: 1px solid transparent;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            display: flex;
            align-items: flex-end;
        }
        .prompt-textarea {
            width: 100%;
            border: none;
            background: transparent;
            resize: none;
            outline: none;
            font-size: 16px;
            line-height: 1.5;
            color: #000;
            height: 24px;
            max-height: 150px;
            overflow-y: hidden;
            padding: 0;
            margin: 0;
        }

        .input-icon-left { position: absolute; bottom: 10px; left: 10px; font-size: 24px; color: #222; cursor: pointer; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; z-index: 10; }
        .input-icon-left:hover { background-color: rgba(0,0,0,0.05); }
        .input-actions-right { position: absolute; bottom: 10px; right: 12px; display: flex; gap: 8px; align-items: center; }
        .mic-btn { color: #000; font-size: 18px; cursor: pointer; padding: 6px; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; }
        .send-btn { background-color: #e5e5e5; color: #f4f4f4; width: 32px; height: 32px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; cursor: default; transition: all 0.2s; }
        .send-btn.active { background-color: #191919; color: white; cursor: pointer; }

        /* Mobile specific adjustments */
        @media (max-width: 768px) {
            .sidebar { display: none; }
            .input-area-fixed { left: 0; padding: 10px; }
            .chat-message, .input-container { max-width: 100%; padding: 0 10px; }
            .reaction-icons { margin-left: 50px; }
        }

    </style>
</head>
<body>

    <div class="d-flex h-100">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-header d-flex align-items-center justify-content-between mb-2">
                <div class="nav-btn w-100 justify-content-between p-2 hover-bg">
                    <div class="d-flex align-items-center gap-2">
                        <div style="width: 24px; height: 24px; border: 1px solid #ddd; border-radius: 50%; display:flex; align-items:center; justify-content:center;">
                            <i class="fa-solid fa-robot" style="font-size: 12px;"></i>
                        </div>
                        <span style="font-weight: 500;">New chat</span>
                    </div>
                    <i class="fa-regular fa-pen-to-square text-secondary" style="font-size: 14px;"></i>
                </div>
            </div>

            <div class="sidebar-scroll-area">
                <div class="nav-btn">
                    <i class="fa-solid fa-magnifying-glass"></i>
                    Search chats
                    <span class="ms-auto text-secondary" style="font-size:10px; border:1px solid #ddd; padding:0 4px; border-radius:4px;">Ctrl K</span>
                </div>

                <div class="nav-btn"><i class="fa-solid fa-layer-group"></i>Library</div>
                <div class="nav-btn"><i class="fa-solid fa-folder-open"></i>Projects</div>

                <div class="section-label mt-2">Your chats</div>
                <div class="chat-history-item">Chatbot UI design</div>
                <div class="chat-history-item">Centered textarea design</div>
                <div class="chat-history-item">Code review and fixes</div>
                <div class="chat-history-item">ready1</div>
            </div>

            <div class="profile-section">
                <div class="user-profile">
                    <div class="avatar">RA</div>
                    <div class="d-flex flex-column" style="line-height: 1.2;">
                        <span style="font-size: 14px; font-weight: 500;">Ram</span>
                        <span style="font-size: 12px; color: #666;">Free</span>
                    </div>
                    <button class="upgrade-btn-sidebar shadow-sm">Upgrade</button>
                </div>
            </div>
        </div>
        <!-- End Sidebar -->

        <!-- Main Content -->
        <div class="main-content">

            <!-- Top Bar -->
            <div class="top-bar">
                <div class="model-selector">
                    Agents <i class="fa-solid fa-chevron-down" style="font-size: 12px; color: #999;"></i>
                </div>
                <div class="d-flex align-items-center gap-3">
<!--                    <a href="#" class="upgrade-pill">-->
<!--                        <i class="fa-solid fa-wand-magic-sparkles sparkle-icon"></i>-->
<!--                        Upgrade for free-->
<!--                    </a>-->
                    <span class="text-secondary" style="font-size: 14px; cursor: pointer;">Share</span>
<!--                    <span class="text-secondary" style="font-size: 14px; cursor: pointer;">Add people</span>-->
                    <div style="width: 32px; height: 32px; cursor: pointer;">
                         <i class="fa-regular fa-user" style="font-size: 18px; color: #333;"></i>
                    </div>
                    <i class="fa-solid fa-ellipsis-vertical text-secondary" style="font-size: 18px; cursor: pointer;"></i>
                </div>
            </div>

            <!-- Chat Log -->
            <div class="chat-log" id="chatLog">
                <!-- Initial Greeting -->
                <h1 class="hero-title greeting" id="initialGreeting">AI-Powered Risk Orchestrator</h1>
            </div>

            <!-- Input Area (Fixed to bottom) -->
            <div class="input-area-fixed">
                <div class="input-container">
                    <div class="prompt-box mb-4" id="promptBox">
                        <textarea id="promptTextarea" class="prompt-textarea" rows="1" placeholder="Ask anything"></textarea>

                        <!-- Plus Icon (Left) -->
                        <div class="input-icon-left plus-btn" title="Attach files">
                            <i class="fa-solid fa-plus"></i>
                        </div>

                        <!-- Right Icons -->
                        <div class="input-actions-right">
                            <div class="mic-btn" title="Use Microphone">
                                <i class="fa-solid fa-microphone"></i>
                            </div>
                            <div class="send-btn" id="sendBtn" title="Send message">
                                <i class="fa-solid fa-arrow-up"></i>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        const textarea = document.getElementById('promptTextarea');
        const sendBtn = document.getElementById('sendBtn');
        const chatLog = document.getElementById('chatLog');
        const initialGreeting = document.getElementById('initialGreeting');
        const MAX_HEIGHT = 150;
        const USER_NAME_INITIALS = 'RA';
        const ASSISTANT_ICON = '<i class="fa-solid fa-bolt"></i>';

        // --- Message Template Functions ---

        function createUserMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message user-message';
            // Inner HTML is safe because of white-space: pre-wrap;
            messageDiv.innerHTML = `
                <div class="message-row">
                    <div class="message-text">${text}</div>
                    <div class="message-icon">${USER_NAME_INITIALS}</div>
                </div>
            `;
            return messageDiv;
        }

        function createAssistantMessage(text) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'chat-message assistant-message';
            // Removed replace(/\n/g, '<br>') because white-space: pre-wrap handles it
            messageDiv.innerHTML = `
                <div class="message-row">
                    <div class="message-icon">${ASSISTANT_ICON}</div>
                    <div class="message-text">
                        ${text}
                    </div>
                </div>
                <div class="reaction-icons">
                    <i class="fa-regular fa-copy" title="Copy"></i>
                    <i class="fa-regular fa-thumbs-up" title="Like"></i>
                    <i class="fa-regular fa-thumbs-down" title="Dislike"></i>
                    <i class="fa-solid fa-arrow-up-from-bracket" title="Share"></i>
                    <i class="fa-solid fa-arrows-rotate" title="Regenerate response"></i>
                    <i class="fa-solid fa-ellipsis" title="More actions"></i>
                </div>
            `;
            return messageDiv;
        }

        function appendMessage(messageElement) {
            // Remove initial greeting if present
            if (initialGreeting) {
                initialGreeting.remove();
            }

            chatLog.appendChild(messageElement);
            // Scroll to bottom
            chatLog.scrollTop = chatLog.scrollHeight;
        }


        // --- Interaction Logic ---

        function handleSend(userMessage) {
            const trimmedMessage = userMessage.trim();
            if (trimmedMessage === "") return;

            // 1. Append User Message
            // IMPORTANT: We use the raw userMessage (not trimmed) to preserve leading/trailing newlines/spaces if any, although typically only internal formatting matters.
            appendMessage(createUserMessage(userMessage));

            // 2. Simulate Assistant Response (Delayed)
            const assistantText = `Hi! ðŸ‘‹

I noticed you are working on a UI design. I can provide Tailwind CSS code, refine existing layouts, or suggest modern UI practices.

   Let me know what you need!

This response now preserves multiple spaces and line breaks due to the new CSS rule.`;

            // Disable input while "typing"
            textarea.disabled = true;
            sendBtn.classList.remove('active');

            setTimeout(() => {
                appendMessage(createAssistantMessage(assistantText));
                textarea.disabled = false;
                textarea.focus();
            }, 1000); // 1 second delay for simulation

            // 3. Reset Input
            textarea.value = '';
            textarea.style.height = '24px';
            sendBtn.classList.remove('active');
            textarea.classList.remove('scrollable');
            textarea.style.overflowY = 'hidden';
        }


        // --- Event Listeners ---

        // Auto-resize logic
        textarea.addEventListener('input', function() {
            this.style.height = 'auto';

            const newHeight = Math.min(this.scrollHeight, MAX_HEIGHT);

            if (this.value === "") {
                 this.style.height = '24px';
            } else {
                 this.style.height = newHeight + 'px';
            }

            if (this.scrollHeight > MAX_HEIGHT) {
                this.classList.add('scrollable');
                this.style.overflowY = 'auto';
            } else {
                this.classList.remove('scrollable');
                this.style.overflowY = 'hidden';
            }

            // Update Send Button State
            if (this.value.trim() !== "") {
                sendBtn.classList.add('active');
            } else {
                sendBtn.classList.remove('active');
            }
        });

        // Handle Enter key
        textarea.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                handleSend(this.value);
            }
        });

        // Handle Send button click
        sendBtn.addEventListener('click', function() {
            if (this.classList.contains('active')) {
                handleSend(textarea.value);
            }
        });

    </script>
</body>
</html>